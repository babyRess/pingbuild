System.register("chunks:///_virtual/BallController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./number-utils.ts"],(function(t){var e,o,n,i,a,r,s,c,l,u,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,a=t._decorator,r=t.EventTarget,s=t.CCInteger,c=t.Collider2D,l=t.Contact2DType,u=t.Vec3,p=t.Component},function(t){h=t.NumberUtils}],execute:function(){var v,d,y,g;i._RF.push({},"76e4aWMA4dOopVj1f+Pd9qg","BallController",void 0);var w=a.ccclass,f=a.property;new r,t("BallController",(v=w("BallController"),d=f(s),v((e((g=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._velocity=3e3,e.gsap=null,e.tweenMove=null,e}o(e,t);var i=e.prototype;return i.setGsap=function(t){this.gsap=t},i.CreateBall=function(t){this.setGsap(t);var e=this.getComponent(c);e&&e.on(l.BEGIN_CONTACT,this.onBeginContact,this),window.addEventListener("runGame",this.runGame.bind(this)),window.addEventListener("pauseGame",this.pauseGame.bind(this)),this.moveFirst()},i.runGame=function(){this.tweenMove&&this.tweenMove.resume()},i.pauseGame=function(){this.tweenMove&&this.tweenMove.pause()},i.moveFirst=function(){var t=this;console.log("Move first");var e=this.node.getPosition(),o=new u(e.x,-360,1),n={ratio:0},i=this.getDuration(e,o);this.tweenMove=this.gsap.to(n,{ratio:1,duration:2*i,ease:"none",onUpdate:function(){var i=new u(e.x+(o.x-e.x)*n.ratio,e.y+(o.y-e.y)*n.ratio,e.z+(o.z-e.z)*n.ratio);t.node.setPosition(i)},onComplete:function(){window.dispatchEvent(new CustomEvent("ballDestroyed")),t.node.active=!1},callbackScope:this})},i.onBeginContact=function(t,e,o){var n=this;if(0===t.tag||0===e.tag){this.tweenMove.kill();var i=1===t.tag?t.node:e.node,a=1===t.tag?e.node:t.node,r=i.getPosition().x-a.getPosition().x,s={ratio:0},c=i.getPosition(),l=new u(c.x+3*r,-360,1),p=h.GetRandomIntInclusive(1600,2e3),v=new u((c.x+l.x)/2,Math.max(c.y,l.y)+p,(c.z+l.z)/2),d=this.getDurationCircle(c,l,v);this.tweenMove=this.gsap.to(s,{ratio:1,duration:d,ease:"none",onUpdate:function(){var t=n.getQuadraticBezierPoint(s.ratio,c,v,l);n.node.setPosition(t)},onComplete:function(){console.log("Ball is destroyed"),window.dispatchEvent(new CustomEvent("ballDestroyed")),n.node.active=!1},callbackScope:this})}},i.getQuadraticBezierPoint=function(t,e,o,n){var i=Math.pow(1-t,2)*e.x+2*(1-t)*t*o.x+Math.pow(t,2)*n.x,a=Math.pow(1-t,2)*e.y+2*(1-t)*t*o.y+Math.pow(t,2)*n.y,r=Math.pow(1-t,2)*e.z+2*(1-t)*t*o.z+Math.pow(t,2)*n.z;return new u(i,a,r)},i.getDuration=function(t,e){return u.distance(t,e)/this.velocity},i.getDurationCircle=function(t,e,o){return u.distance(t,o)/this.velocity+u.distance(o,e)/this.velocity},n(e,[{key:"velocity",get:function(){return this._velocity},set:function(t){this._velocity=t}}]),e}(p)).prototype,"velocity",[d],Object.getOwnPropertyDescriptor(g.prototype,"velocity"),g.prototype),y=g))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/BatController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,n,e,o,i,a,l,c;return{setters:[function(t){r=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,l=t.Animation,c=t.Component}],execute:function(){var s,p,u,f,h;i._RF.push({},"a346405AHFD2othExS7YaVs","BatController",void 0);var y=a.ccclass,b=a.property;t("BatController",(s=y("BatController"),p=b(l),s((h=r((f=function(t){function r(){for(var r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=t.call.apply(t,[this].concat(i))||this,e(r,"batAnimation",h,o(r)),r}return n(r,t),r.prototype.hitBall=function(){this.batAnimation.play()},r}(c)).prototype,"batAnimation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=f))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BatController.ts","./index.js","./number-utils.ts","./BallController.ts"],(function(t){var e,i,n,a,o,r,l,s,u,c,m,h,d,b,p,f,g,v,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Label,s=t.Sprite,u=t.Prefab,c=t.Node,m=t.PhysicsSystem2D,h=t.Contact2DType,d=t.UIOpacity,b=t.instantiate,p=t.Component},function(t){f=t.BatController},function(t){g=t.gsap},function(t){v=t.NumberUtils},function(t){C=t.BallController}],execute:function(){var y,P,G,I,w,B,T,S,L,E,N,R,O,z,D,F,_,X,M,x,A,U,H,k,j,V,q;o._RF.push({},"b4dd2k0sfBDR5Xu7h9vvns3","GameController",void 0);var J=r.ccclass,K=r.property;t("GameController",(y=J("GameController"),P=K(f),G=K(l),I=K(l),w=K(s),B=K(l),T=K(u),S=K(c),L=K(u),E=K(u),N=K(c),R=K(c),y((D=e((z=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"batController",D,a(e)),n(e,"scoreLabel",F,a(e)),n(e,"timeLabel",_,a(e)),n(e,"timeSprite",X,a(e)),n(e,"goldLabel",M,a(e)),n(e,"ballPrefab",x,a(e)),n(e,"ballParent",A,a(e)),n(e,"goldItemPrefab",U,a(e)),n(e,"ballBonusItemPrefab",H,a(e)),n(e,"itemParent",k,a(e)),n(e,"gameOverNode",j,a(e)),n(e,"minXBat",V,a(e)),n(e,"maxXBat",q,a(e)),e.goldItemNodeFree=[],e.ballBonusItemFree=[],e.timer={minusTime:0,secondTime:60},e.currentScore=0,e.currentGold=0,e.isCountTime=!0,e.timePass=0,e.timeTween=null,e.ball=0,e.isPause=!0,e.isStart=!1,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.gsap=g},o.start=function(){m.instance&&(m.instance.on(h.BEGIN_CONTACT,this.onBeginContact,this),m.instance.on(h.END_CONTACT,this.onEndContact,this)),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),window.addEventListener("ballDestroyed",this.detroyBall.bind(this)),window.addEventListener("startGame",this.startGame.bind(this)),window.addEventListener("pauseGame",this.pauseGame.bind(this)),window.addEventListener("runGame",this.runGame.bind(this))},o.startGame=function(){var t=this;this.isStart||(this.isPause=!1,this.isStart=!0,console.log("Start Game"),this.currentScore=0,this.updateScore(),this.currentGold=0,this.updateGold(),this.setTime(90),this.gameOverNode.active=!1,this.gsap.delayedCall(1,(function(){t.createBall()})))},o.pauseGame=function(){console.log("Pause Game"),this.isPause=!0,this.timeTween&&this.timeTween.pause()},o.runGame=function(){console.log("Run Game"),this.isPause=!1,this.timeTween&&this.timeTween.resume()},o.onDestroy=function(){m.instance&&(m.instance.off(h.BEGIN_CONTACT,this.onBeginContact,this),m.instance.off(h.END_CONTACT,this.onEndContact,this)),this.node.off(c.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),window.removeEventListener("ballDestroyed",this.detroyBall.bind(this))},o.HitBall=function(){this.currentScore++,this.updateScore(),this.batController.hitBall()},o.detroyBall=function(){this.ball--,0===this.ball&&this.gameOver()},o.gameOver=function(){this.isCountTime=!1,this.timeTween.kill(),this.timeTween=null,this.timeLabel.string="0",this.timeSprite.fillRange=0,this.gameOverNode.active=!0;var t=new CustomEvent("gameOver",{detail:{score:this.currentScore,gold:this.currentGold}});window.dispatchEvent(t),this.ballParent.removeAllChildren(),this.itemParent.removeAllChildren(),this.pauseGame(),this.isStart=!1,console.error("Game Over")},o.onTouchMove=function(t){if(!this.isPause){var e=t.getUILocation().x;e<this.minXBat&&(e=this.minXBat),e>this.maxXBat&&(e=this.maxXBat),this.batController.node.setPosition(e,this.batController.node.getPosition().y,1)}},o.onBeginContact=function(t,e,i){(0===t.tag&&1===e.tag||1===t.tag&&0===e.tag)&&this.HitBall()},o.onEndContact=function(t,e,i){var n=this;if(1===t.tag&&(2===e.tag||3===e.tag)||(2===t.tag||3===t.tag)&&1===e.tag)if(2===t.tag||2===e.tag){var a=2===t.tag?t.node:e.node,o=a.getComponent(d);if(0===o.opacity)return;this.gsap.delayedCall(.5,(function(){n.createBall()})),o.opacity=0,this.ballBonusItemFree.push(a)}else{var r=3===t.tag?t.node:e.node,l=r.getComponent(d);if(0===l.opacity)return;this.currentGold++,this.updateGold(),l.opacity=0,this.goldItemNodeFree.push(r)}},o.updateScore=function(){this.scoreLabel.string=this.currentScore.toString()},o.updateGold=function(){this.goldLabel.string=this.currentGold.toString()},o.setTime=function(t){var e=this;this.timeTween&&this.timeTween.kill();var i=t;this.timePass=0;var n=0;this.timeLabel.string=n.toString(),this.timeSprite.fillRange=n/i,this.timeTween=this.gsap.to(this,{timePass:i,duration:i,ease:"none",onUpdate:function(){if(i-Math.floor(e.timePass)!==n){n=i-Math.floor(e.timePass);var t=new CustomEvent("updateTimer",{detail:n});window.dispatchEvent(t),e.timeLabel.string=n.toString(),e.timeSprite.fillRange=n/i,v.GetRandomIntInclusive(0,100)<20&&e.timePass>5&&e.createGold(),v.GetRandomIntInclusive(0,100)<10&&e.timePass>7&&e.createBallBonus()}}})},o.createGold=function(){if(this.goldItemNodeFree.length>0){var t=this.goldItemNodeFree.pop();return t.getComponent(d).opacity=255,void t.setPosition(v.GetRandomIntInclusive(120,650),v.GetRandomIntInclusive(600,850),0)}var e=b(this.goldItemPrefab);this.itemParent.addChild(e),e.setPosition(v.GetRandomIntInclusive(120,650),v.GetRandomIntInclusive(600,850),0)},o.createBallBonus=function(){if(this.ballBonusItemFree.length>0){var t=this.ballBonusItemFree.pop();return t.getComponent(d).opacity=255,void t.setPosition(v.GetRandomIntInclusive(120,650),v.GetRandomIntInclusive(600,850),0)}var e=b(this.ballBonusItemPrefab);this.itemParent.addChild(e),e.setPosition(v.GetRandomIntInclusive(120,650),v.GetRandomIntInclusive(600,850),0)},o.createBall=function(){var t=b(this.ballPrefab);this.ballParent.addChild(t),t.setPosition(v.GetRandomIntInclusive(220,500),1300,0),this.ball++,t.getComponent(C).CreateBall(this.gsap)},e}(p)).prototype,"batController",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(z.prototype,"scoreLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(z.prototype,"timeLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(z.prototype,"timeSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(z.prototype,"goldLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(z.prototype,"ballPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(z.prototype,"ballParent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(z.prototype,"goldItemPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(z.prototype,"ballBonusItemPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(z.prototype,"itemParent",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(z.prototype,"gameOverNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(z.prototype,"minXBat",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 71}}),q=e(z.prototype,"maxXBat",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 685}}),O=z))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,o,a,i,s,c,u,l,p,g;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.ProgressBar,l=e.Label,p=e.Component,g=e.director}],execute:function(){var d,f,h,L,b,v,m;s._RF.push({},"583f0+ZXbREQYC93ZaeVTCc","LoadingScene",void 0);var y=c.ccclass,w=c.property;e("LoadingScene",(d=y("LoadingScene"),f=w(u),h=w(l),d((v=r((b=function(e){function r(){for(var r,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=e.call.apply(e,[this].concat(a))||this,t(r,"progressBar",v,o(r)),t(r,"loadingLabel",m,o(r)),r}n(r,e);var s=r.prototype;return s.onLoad=function(){this.loadResources()},s.loadResources=function(){var e=a(i().mark((function e(){var r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingLabel&&(this.loadingLabel.string="Loading..."),this.progressBar&&(this.progressBar.progress=0),e.next=4,this.sleep(500);case 4:g.preloadScene("gameScene",(function(e,n){var t=e/n;r.progressBar&&(r.progressBar.progress=t),r.loadingLabel&&(r.loadingLabel.string="Loading... "+Math.floor(100*t)+"%")}),a(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.sleep(500);case 2:g.loadScene("gameScene",(function(){var e=new CustomEvent("gameReady",{});window.dispatchEvent(e)}));case 3:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.sleep=function(e){return new Promise((function(r){return setTimeout(r,e)}))},r}(p)).prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(b.prototype,"loadingLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=b))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/number-utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"e0f5c8KLgdFmr02qCnTNADC","number-utils",void 0);t("NumberUtils",function(){function t(){}return t.GetRandomIntInclusive=function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1)+t)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/resources",["./BallController.ts","./BatController.ts","./GameController.ts","./LoadingScene.ts","./number-utils.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/resources', 'chunks:///_virtual/resources'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});